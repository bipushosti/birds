
#include <stdio.h>
#include <unistd.h>
#include <stdint.h>
#include "tiffio.h"

int main()
{
	TIFF* tif = TIFFOpen("lw_crop.tif", "r");
	uint32_t width,height;
	if(tif) {
		//Getting the width and the height of the image
		TIFFGetField(tif,TIFFTAG_IMAGEWIDTH,&width);
		TIFFGetField(tif,TIFFTAG_IMAGELENGTH,&height);	
		

		uint32_t npixels;
		npixels = width * height;
		uint32_t* raster;
		raster = (uint32_t *)_TIFFmalloc(npixels * sizeof(uint32_t));
		TIFFReadRGBAImage(tif,width,height,raster,0);
		
		char val;
		uint32_t dec_val;
		int i,j;
		dec_val = 0;
		for(i=0;i<(npixels * sizeof(uint32_t));i+=4){
				dec_val = 0;
				for(j=i;j<i+4;j++){
					dec_val +=atoi(raster[j]);
				}

				printf("%d\t",val);
			if(i == width*4) printf("%d\n",dec_val);
			else printf("%d ",dec_val);
		}
		_TIFFfree(raster);	
	}
	
	TIFFClose(tif);
	return 0;
}



